{"version":3,"sources":["webpack:///src/components/NotebookList.vue","webpack:///./src/components/NotebookList.vue?4402","webpack:///./src/components/NotebookList.vue"],"names":["NotebookList","name","data","created","this","checkLogin","path","getNotebooks","computed","extends_default","Object","vuex_esm","methods","onCreate","_this","$prompt","confirmButtonText","cancelButtonText","inputPattern","inputErrorMessage","then","_ref","value","addNotebook","title","catch","res","$message","type","message","msg","onEdit","notebook","_this2","inputValue","_ref2","updateNotebook","notebookId","id","onDelete","_this3","$confirm","deleteNotebook","components_NotebookList","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","href","on","click","$event","preventDefault","apply","arguments","_v","_s","notebooks","length","_l","key","to","noteCounts","stopPropagation","createdAtFriendly","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/3.2b12bfbf3790904adbae.js","sourcesContent":["<template>\r\n    <div class=\"detail\" id=\"notebook-list\">\r\n    <header>\r\n      <a href=\"#\" class=\"btn\" @click.prevent=\"onCreate\"><i class=\"iconfont icon-plus\"></i> 新建笔记本</a>\r\n    </header>\r\n    <main>\r\n      <div class=\"layout\">\r\n        <h3>笔记本列表({{notebooks.length}})</h3>\r\n        <div class=\"book-list\">\r\n          <router-link v-for=\"notebook in notebooks\" :key=notebook.id :to=\"`/note?notebookId=${notebook.id}`\" class=\"notebook\">\r\n            <div>\r\n                <span class=\"iconfont icon-notebook\"></span>{{notebook.title}}\r\n                <span>{{notebook.noteCounts}}</span>\r\n                <span class=\"action\" @click.stop.prevent=\"onEdit(notebook)\">编辑</span>\r\n                <span class=\"action\" @click.stop.prevent=\"onDelete(notebook)\">删除</span>\r\n                <span class=\"data\">{{notebook.createdAtFriendly}}</span>\r\n            </div>      \r\n          </router-link>\r\n        </div>       \r\n      </div>\r\n\r\n    </main>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n    import Auth from '@/apis/auth'\r\n    import NoteBooks from '@/apis/notebooks'\r\n    // window.noteBooks = NoteBooks   // 接口测试，测试成功\r\n    import {friendlyDate} from '@/helpers/util'\r\n    import {mapState,mapActions,mapGetters} from 'vuex'\r\n\r\n    export default {\r\n        name:'NotebookList',\r\n        data(){\r\n            return{}\r\n        },\r\n\r\n        created(){\r\n            this.checkLogin({path:'/login'})\r\n           /*  Auth.getInfo()\r\n                .then(res=>{\r\n                    if(!res.isLogin){\r\n                        this.$router.push({path:'/login'})\r\n                    }\r\n                }) */\r\n\r\n            /* NoteBooks.getAll()\r\n                .then(res => {\r\n                    // console.log(res)\r\n                    this.notebooks = res.data\r\n                }) */\r\n            this.getNotebooks()\r\n        },\r\n\r\n        computed:{\r\n            // ...mapState(['notebooks']) // 这里因为分了模块，不一定能找到是哪个state所以会报错，最好用getters\r\n            ...mapGetters(['notebooks'])\r\n        },\r\n\r\n        methods:{\r\n            ...mapActions([\r\n                'getNotebooks',\r\n                'addNotebook',\r\n                'updateNotebook',\r\n                'deleteNotebook',\r\n                'checkLogin'\r\n            ]),\r\n\r\n            onCreate(){\r\n                this.$prompt('输入笔记本新标题', '创建笔记本', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    inputPattern: /^.{1,30}$/,\r\n                    inputErrorMessage: '标题不能为空，且不超过30个字符'\r\n                }).then(({ value }) => {\r\n                    // this.$prompt是一个promise对象，我们NoteBooks.addNotebook也是个promise对象，所以把他(NoteBooks.addNotebook)\r\n                    // 返(return)出来，就可以继续像我们之前使用的那样用了，移花接木，但是多了UI界面\r\n                    // return NoteBooks.addNotebook({title:value})\r\n                    this.addNotebook({title:value})  \r\n                })\r\n                /* .then(res=>{\r\n                        console.log(res)\r\n                        res.data.friendlyCreatedAt = friendlyDate(res.data.createdAt)\r\n                        this.notebooks.unshift(res.data)\r\n                        this.$message({\r\n                        type: 'success',\r\n                        message: res.msg\r\n                    })      \r\n                }) */\r\n                // 对这块进行一些优化(未优化成功)，嘿嘿，我明白了!!\r\n                .catch(res=>{\r\n                    this.$message({\r\n                        type:'error',\r\n                        message:res.msg || \"取消创建\"\r\n                    })\r\n                })\r\n            },\r\n            // 未使用elementUI的时候，直接用系统的垃圾UI\r\n            /* onEdit(notebook){\r\n                console.log('edit...',notebook)\r\n                let title = window.prompt('修改标题',notebook.title)\r\n                NoteBooks.updateNotebook(notebook.id,{title:title})\r\n                    .then(res=>{\r\n                        console.log(res)\r\n                        notebook.title = title\r\n                        alert(res.msg)\r\n                    })\r\n            }, */\r\n            onEdit(notebook){\r\n                let title = ''\r\n                this.$prompt('输入笔记本新标题', '修改笔记本', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    inputValue:notebook.title,\r\n                    inputPattern: /^.{1,30}$/,\r\n                    inputErrorMessage: '标题不能为空，且不超过30个字符'\r\n                }).then(({ value }) => {\r\n                    this.updateNotebook({notebookId:notebook.id,title:value})\r\n                })\r\n                // .then(res=>{\r\n                //         console.log(res)\r\n                //         notebook.title = title\r\n                //         // console.log(notebook.title)\r\n                //         this.$message.success(res.msg)   // 简化写法，就这里用了，别的地方没简化，无所谓啦！\r\n                //         /* this.$message({\r\n                //         type: 'success',\r\n                //         message: res.msg\r\n                //     })     */  \r\n                // })\r\n                // 对这块进行一些优化(未优化成功)，嘿嘿，我明白了!!\r\n                .catch(res=>{\r\n                    this.$message({\r\n                        type:'error',\r\n                        message:res.msg || \"取消编辑!\"\r\n                    })\r\n                })\r\n            },\r\n            // 未使用elementUI的时候，直接用系统的垃圾UI\r\n            /* onDelete(notebook){\r\n                console.log('delete...')\r\n                let isConfirm = window.confirm('你确定要删除吗?')\r\n                if(isConfirm){\r\n                    NoteBooks.deleteNotebook(notebook.id)\r\n                        .then(res=>{\r\n                            console.log(res)\r\n                            this.notebooks.splice(this.notebooks.indexOf(notebook),1)\r\n                            alert(res.msg)\r\n                        })\r\n                }\r\n            } */\r\n            onDelete(notebook){\r\n                this.$confirm('确认要删除笔记本吗?', '删除笔记本', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning'\r\n                }).then(()=>{\r\n                    this.deleteNotebook({notebookId:notebook.id})\r\n                })\r\n                /* .then(res=>{\r\n                    console.log(res)\r\n                    this.notebooks.splice(this.notebooks.indexOf(notebook),1)\r\n                    this.$message({\r\n                        type: 'success',\r\n                        message: res.msg\r\n                    })\r\n                }) */\r\n                // 对这块进行一些优化(未优化成功)，嘿嘿，我明白了!!\r\n                .catch(res => {\r\n                        this.$message({\r\n                            type: 'error',\r\n                            message: res.msg||'已取消删除'\r\n                        })        \r\n                    })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    @import url(../assets/css/notebook-list.less);\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/NotebookList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"detail\",attrs:{\"id\":\"notebook-list\"}},[_c('header',[_c('a',{staticClass:\"btn\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onCreate.apply(null, arguments)}}},[_c('i',{staticClass:\"iconfont icon-plus\"}),_vm._v(\" 新建笔记本\")])]),_vm._v(\" \"),_c('main',[_c('div',{staticClass:\"layout\"},[_c('h3',[_vm._v(\"笔记本列表(\"+_vm._s(_vm.notebooks.length)+\")\")]),_vm._v(\" \"),_c('div',{staticClass:\"book-list\"},_vm._l((_vm.notebooks),function(notebook){return _c('router-link',{key:notebook.id,staticClass:\"notebook\",attrs:{\"to\":(\"/note?notebookId=\" + (notebook.id))}},[_c('div',[_c('span',{staticClass:\"iconfont icon-notebook\"}),_vm._v(_vm._s(notebook.title)+\"\\n              \"),_c('span',[_vm._v(_vm._s(notebook.noteCounts))]),_vm._v(\" \"),_c('span',{staticClass:\"action\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.onEdit(notebook)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('span',{staticClass:\"action\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.onDelete(notebook)}}},[_vm._v(\"删除\")]),_vm._v(\" \"),_c('span',{staticClass:\"data\"},[_vm._v(_vm._s(notebook.createdAtFriendly))])])])}),1)])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e6deabf0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/NotebookList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e6deabf0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./NotebookList.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./NotebookList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./NotebookList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e6deabf0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./NotebookList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e6deabf0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/NotebookList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}